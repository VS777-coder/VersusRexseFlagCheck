<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Versus Revise - Static Data Auditor</title>
    <style>
        :root { --c-bg: #111; --c-text: #eee; --c-accent: #ffd700; --c-active-border: #adff2f; }
        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; }
        html, body { width: 100%; height: 100%; margin: 0; padding: 0; background: var(--c-bg); color: var(--c-text); font-family: sans-serif; overflow: hidden; display: flex; flex-direction: column; }
        .controls { padding: 5px; flex-shrink: 0; background: #222; border-bottom: 1px solid #444; }
        .tab-group { display: flex; gap: 4px; margin-bottom: 5px; overflow-x: auto; }
        
        /* ボタンの基本スタイル：非選択時は暗く */
        .tab { flex: 1; padding: 8px 4px; text-align: center; font-size: 11px; font-weight: bold; cursor: pointer; border-radius: 4px; border: 2px solid #444; opacity: 0.6; transition: all 0.2s; white-space: nowrap; min-width: 60px; filter: brightness(0.7); }
        
        /* 選択時：明るくし、黄緑の枠をつける */
        .tab.active { opacity: 1; filter: brightness(1); border-color: var(--c-active-border); box-shadow: 0 0 8px rgba(173, 255, 47, 0.4); }

        /* リール選択ボタンのデフォルト色 */
        #t-left { background: #ffb7ce; color: #800020; }
        #t-middle { background: #b3e5fc; color: #003c8f; }
        #t-right { background: #c8e6c9; color: #1b5e20; }

        /* 状態選択ボタンのデフォルト色 */
        #s-bonus_unestablished { background: #fff; color: #000; }
        #s-x_big_established { background: #304ffe; color: #fff; }
        #s-seven_big_established { background: #d50000; color: #fff; }
        #s-reg_bonus_established { background: #444; color: #fff; }

        .workspace { display: flex; flex-direction: row-reverse; flex: 1; overflow: hidden; padding: 10px; gap: 10px; align-items: stretch; justify-content: center; }
        .reel-container { width: 100px; height: 100%; max-height: 100%; position: relative; background: #000; border: 2px solid #333; border-radius: 4px; flex-shrink: 0; overflow: hidden; touch-action: none; }
        .reel-strip { position: absolute; width: 100%; top: 0; left: 0; will-change: transform; }
        .symbol { height: 60px; display: flex; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); position: relative; }
        .sym-idx { width: 26px; flex-shrink: 0; text-align: center; color: var(--c-accent); font-weight: bold; height: 100%; display: flex; align-items: center; justify-content: center; background: #111; border-right: 1px solid #333; z-index: 2; font-size: 11px; }
        .sym-bg { position: absolute; top: 0; left: 26px; right: 0; bottom: 0; z-index: 1; background-repeat: no-repeat; background-position: center; }
        .target-box { position: absolute; top: 120px; left: 0; width: 100%; height: 180px; border: 3px solid #ff0000; pointer-events: none; z-index: 10; }

        /* 成立役表示部分：Y方向サイズ最大 */
        .results { flex: 1; height: 100%; background: #1a1a1a; border: 1px solid #333; overflow-y: auto; border-radius: 4px; display: flex; flex-direction: column; }
        .res-row { display: flex; border-bottom: 1px solid #000; min-height: 45px; align-items: center; padding: 0 10px; font-family: monospace; color: #000; font-weight: bold; }
        .res-name { width: 100px; font-size: 12px; flex-shrink: 0; }
        .res-data { flex: 1; text-align: right; font-size: 16px; letter-spacing: 2px; }

        /* フラグごとの背景色 */
        .f-hazure { background: #ffffff; }
        .f-rep { background: #b3e5fc; }
        .f-bell { background: #fff176; }
        .f-suika { background: #81c784; }
        .f-cher { background: #ef5350; }
        .f-tok { background: #ba68c8; color: #fff; }
    </style>
</head>
<body>
    <div class="controls">
        <div class="tab-group">
            <div id="t-left" class="stop-tab tab active" onclick="app.setStop('left')">左リール</div>
            <div id="t-middle" class="stop-tab tab" onclick="app.setStop('middle')">中リール</div>
            <div id="t-right" class="stop-tab tab" onclick="app.setStop('right')">右リール</div>
        </div>
        <div class="tab-group">
            <div id="s-bonus_unestablished" class="state-tab tab active" onclick="app.setState('bonus_unestablished')">未成立</div>
            <div id="s-x_big_established" class="state-tab tab" onclick="app.setState('x_big_established')">Ｘ成立</div>
            <div id="s-seven_big_established" class="state-tab tab" onclick="app.setState('seven_big_established')">７成立</div>
            <div id="s-reg_bonus_established" class="state-tab tab" onclick="app.setState('reg_bonus_established')">Reg成立</div>
        </div>
    </div>
    <div class="workspace">
        <div id="touch-area" class="reel-container"><div class="target-box"></div><div id="reel-strip" class="reel-strip"></div></div>
        <div class="results" id="result-list"></div>
    </div>

<script>
const REEL_SYMBOLS = {
    left: ["Rep","Cher","X","Bell","Sui","Rep","Bell","Sui","Seven","Bell","Rep","Cher","Bar","Bell","Sui","Rep","X","X","X","Sui","Bell"],
    middle: ["ベル","チェリー","リプレイ","ベル","チェリー","スイカ","赤７","リプ","ベル","ＢＡＲ","チェリー","リプレイ","ベル","チェリー","Ｘ","リプレイ","ベル","チェリー","スイカ","チェリー","リプレイ"],
    right: ["Cher","Bell","Sui","Rep","Cher","Seven","Bell","Sui","Rep","Cher","Bell","Rep","Bar","Cher","Bell","Sui","Rep","X","Bell","Sui","Rep"]
};

const FLAG_INFO = { 
    hazure:{n:"ハズレ",c:"hazure"}, 
    replay_normal:{n:"通常リプ",c:"rep"}, replay_jac:{n:"JACリプ",c:"rep"}, replay_rt:{n:"RTリプ",c:"rep"}, 
    bell_a:{n:"ベルＡ",c:"bell"}, bell_b:{n:"ベルＢ",c:"bell"}, 
    watermelon_a:{n:"スイカＡ",c:"suika"}, watermelon_b:{n:"スイカＢ",c:"suika"}, 
    cherry_a:{n:"チェリＡ",c:"cher"}, cherry_b:{n:"チェリＢ",c:"cher"}, 
    special_a:{n:"特役Ａ",c:"tok"}, special_b:{n:"特役Ｂ",c:"tok"}, special_c:{n:"特役Ｃ",c:"tok"}, special_d:{n:"特役Ｄ",c:"tok"}, special_e:{n:"特役Ｅ",c:"tok"} 
};

// --- マスタデータ ---
const LEFT_REEL_SLIP_MASTER = {
    hazure: {
        21: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [0,1,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,,,,4,0,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,1,,,,0,1,,,,,,,,,0,,,,,0,,,,,0,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,1,,,,,,,,,0,,2,,4,0,1,,,,,1,,,,,1,,,,,1,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,0,1,2,,,0,,2,,,,1,2,,,,1,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [0,1,,,,,,,,,,,,,,,,,,,,1,,,,,1,,,,,,2,,4,,,2,,4,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,,,,,,,,,,,,2,3,4,,,,,,,1,,3,,,1,,3,,0,,2,,4,0,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [0,1,2,3,,0,1,2,3,4,,,,,,0,1,2,3,4,,1,,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,,,,,,,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,1,,,,,,,,,,,,,,,,,,,,1,2,3,,,1,2,3,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [,,,,,0,1,,,,,,,,,0,,,,,,,,,,,,,,,,1,2,,,,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [0,1,2,,,,,,,,0,1,,3,,0,1,,,,,,,,,,,,,,,,2,3,,,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,0,1,2,3,,,1,,3,,,1,2,3,,,1,2,,,,1,2,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [0,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,,4,,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [0,,2,,4,,,,,,,1,2,,,,,,,,0,1,,3,,0,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,1,,3,4,,1,,3,4,,1,,3,,,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    Vsus: {
        21: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [0,1,2,3,4,,,,,,0,,,,,,,,,,,,2,,,0,1,,,4,0,1,2,3,4,0,1,2,3,4,,,,,4,,,,,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4],
        17: [,,,,,0,1,2,3,4,0,1,,,,0,1,,,,0,,,,,,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,,,,,,,,,,,1,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,,,,,4,,,,,,0,1,2,,,,1,,,,,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,,,],
        14: [,1,,,,,,,,,0,,2,,4,,,,,,,1,,,,,,2,,,,,2,,4,,,2,,4,,1,2,,,,1,2,,,,1,2,,4,,1,,,,,1,2,,4,,,2,,,,1,,,],
        13: [,,2,,,,,,,,0,,,,,,,,,,,1,,3,,0,,,,4,0,,2,,4,0,,2,,4,,,,,,,,,,,,,2,,4,,,2,,,,,2,,4,,,2,,4,,,2,,],
        12: [0,,2,3,,0,,2,3,4,,1,,3,,0,1,2,3,4,,1,,3,4,,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,,,,,,,,,2,,,0,,2,3,],
        11: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,1,,,,,,,,,0,1,,,4,,,,,,,1,2,3,,0,1,2,3,4,0,1,,,,0,1,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,0,,,,,0,1,,,],
        7: [,,,,,0,1,,3,,,1,2,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,],
        6: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,1,,3,,0,,,,],
        5: [0,,,,,0,,2,3,,,,,,,0,1,2,3,,,1,2,,,,,2,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,0,,,,,0,,,,,0,,,,,,1,,3,,0,,,,],
        4: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,,,,,4,0,,,,],
        3: [0,,2,,4,,,,,,0,1,,,,,,,,,,,,,,,1,,,,,1,2,3,4,,1,2,3,4,,,,,,,,,,,0,,2,,4,0,,2,,4,0,,2,,4,,,,,,0,,2,,4],
        2: [0,,2,,4,,,,,,,,2,,4,,,,,,0,1,,3,,,1,,,4,,,,,4,,,,,4,,,,,,,,,,,0,,2,,4,0,,2,,4,0,,2,,4,,1,,3,4,0,,2,,4],
        1: [,,,,,0,1,2,3,4,0,,2,,,0,1,2,3,4,,1,,3,4,,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    seven: {
        21: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,,1,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [0,1,,,,,,,,,,1,,,,,,,,,,,2,,,0,1,,,,0,,,,,0,,,,,,,,,,,,,,,0,,,,,0,1,,,,0,1,2,,,0,1,2,,,0,1,2,,],
        17: [,,,,,0,1,,,,,,2,,,0,1,,,,0,,,,,,1,,,,0,1,,,,0,1,,,,,,,,,,,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,],
        16: [0,,,,,,,,,,,,,,,,,,,,,1,,,,,1,,,,,1,,,,,1,,,,,,,,,,,,,,,1,,,,0,,,,,,1,,,,,1,,,,,1,,,],
        15: [0,,,,,0,1,2,,,,1,,,,0,1,2,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,],
        14: [0,1,,,,,,,,,,,,,,,,,,,,1,,,,0,1,,,,0,,2,,4,0,,2,,4,0,1,2,,,0,1,2,,,0,,2,,4,0,1,,,,0,,,,,0,,,,,0,,,,],
        13: [,1,,3,,,,,,,0,1,2,,4,,,,,,,1,,3,,,,,,,0,,2,,4,0,,2,,4,,,,,,,,,,,0,,2,,4,,1,,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4],
        12: [,1,,3,4,0,1,2,3,4,,,,,4,0,1,2,3,4,,1,,3,4,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,4,,,,,,,,,,4,,,,,4],
        11: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,,,,,,0,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [,1,2,3,4,,,,,,,,,,,,,,,,,1,2,3,,0,1,,,,0,1,,,,0,1,,,,,,,,,,,,,,0,1,,,,,1,,,,0,1,2,,,,1,,,,,1,,,],
        7: [,,,,,0,1,,,,0,,,,,0,1,,,,,,,,,,,,,,,1,2,,,,1,2,,,,,,,,,,,,,,1,2,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,,,,,,,1,,3,,,,,,,,,,,,0,1,2,,,,,2,3,,,,2,3,,,,,,,,,,,,,,2,3,,0,1,2,,,,1,2,3,,0,1,2,3,,0,1,2,3,],
        5: [,,,,,0,1,2,3,,,1,,,,0,1,2,3,,,1,2,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,],
        3: [,1,,,,,,,,,,,,,4,,,,,,,,,,,0,,2,,4,,1,2,,4,,1,2,,4,,,,,,,,,,,,1,2,,4,,1,,3,,,,,,,,,2,3,,,,2,3,],
        2: [,1,,3,,,,,,,0,1,,,,,,,,,0,1,,3,,0,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,4,0,,,3,,0,,,3,4,0,,,3,4],
        1: [,1,,3,,0,1,2,3,4,,1,,,4,0,1,2,3,4,,1,,3,4,,,,,,,1,,3,,,1,,3,,,,,,,,,,,,,1,,3,,,,,,,0,1,,3,,,,,,,,,,,],
    },
    reg: {
        21: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [0,1,,,,,,,,,,,,,,,,,,,,,2,,,0,1,,,4,0,,,,,0,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,0,1,2,,,0,1,2,3,,0,1,2,,],
        17: [,,,,,0,1,,,,0,1,,,,0,1,,,,0,,,,,,1,2,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [0,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,1,,,,,1,,,,,,,,,,,,,,,1,,,,,1,,,,,1,,,,,,,,,,1,,,],
        15: [0,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,1,,,,,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [0,1,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,0,,2,,4,0,,2,,4,0,1,2,,,0,1,2,,,0,,,,,0,,,,,0,,,,,0,1,,,,0,,,,],
        13: [,1,,3,,,,,,,,,,,,,,,,,,1,,3,,0,,,,,0,,2,,4,0,,2,,4,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,2,3,,0,1,2,3,4],
        12: [,1,,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,1,,3,4,0,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,3,,,,,,],
        11: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,1,2,3,4,,,,,,,,,,,,,,,,,1,2,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,4,,,,,4,0,1,2,3,4,0,1,,,,0,1,2,3,4,0,1,,,,0,1,,,],
        7: [,,,,,0,1,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,,,,,3,,,,,,,,,,,,,,,3,,0,1,2,3,,,,,3,,0,,,3,,0,1,2,3,],
        5: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,1,2,,,,,2,,,,,,,,,,,,,,,2,3,4,,,2,3,4,,,,,,,,,,,,,,,,0,,,,,,,,,],
        4: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,],
        3: [,1,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,1,2,,4,,1,2,,4,,,,,,,,,,,,1,,,,,1,2,3,,,,,,,,,2,,4,,,2,3,],
        2: [,1,,3,,,,,,,,,,,,,,,,,0,1,,3,,,1,,,4,,,,,,,,,,,,,,,,,,,,,,,,3,,,,,3,4,0,,,3,,0,,2,,4,0,,,3,4],
        1: [,1,,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,1,,3,4,,1,2,,,,1,,3,,,1,,3,,,,,,,,,,,,0,1,,3,,,,,,,0,1,,3,,,,,,,,,,,],
    }
};

const MIDDLE_REEL_SLIP_MASTER = {
    hazure: {
        21: [,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [0,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [0,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,,,,1,2,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,,0,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [0,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    Vsus: {
        21: [0,,2,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,2,,,0,,2,,,,,2,,,0,1,,,,0,,2,,],
        19: [,1,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,1,,,,,1,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,1,,,,0,,,,],
        18: [,1,2,,4,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,1,,,,0,1,,,,0,1,,3,4,0,,,,,0,1,,3,4,0,,,,,0,1,,3,4],
        16: [,1,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,4,0,1,2,,4,,,,,,,,,,,,,,,4,0,,,,,,,,,,0,,,,,,,,,],
        15: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,4,,,2,,4,0,1,2,3,,0,1,2,3,,0,,,,4,0,1,2,,,0,,,,,0,1,,3,,0,,,,],
        14: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,3,4,,,2,3,4,,1,,3,4,,,,,],
        13: [0,,2,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,,,,,0,1,2,,],
        11: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,1,,,,0,1,2,3,4,0,1,2,3,4,,,2,,,,,2,,,,,2,,,,,2,,,,,2,,],
        10: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [0,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,,,,,,,,,,,0,,,3,4,0,,,3,4,0,,,3,4,0,,2,,,0,,,3,4],
        7: [0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,1,2,3,4,,1,2,3,4,0,,,,4,0,,,,4,0,,,,4,0,,,,,0,,,,4],
        6: [,,,,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,4,0,,,,4,0,,,,4,,1,2,3,4,0,,,,4],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,,,,,,],
        3: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,4,,,,,,,,,,4,,,,,,,,,,],
        2: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,0,1,2,,,0,1,2,,,,1,2,,4,,1,2,,,,1,2,,4,,,,,,,1,2,,],
        1: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,],
    },
    seven: {
        21: [,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,,,0,1,2,,,,,2,,,,1,,,,,,2,,,0,,2,,,0,,2,,],
        19: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,,,,,,,,0,,,,,0,,,,],
        18: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,,,,,,,0,,,,,0,,,,,0,,,,],
        16: [0,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,0,,,,,0,,,,,0,,,,4,0,,,,,0,,,,,0,,,,,0,,,,],
        15: [0,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,0,1,2,3,,0,1,2,3,,0,1,2,,4,0,,2,,,0,1,2,,,0,1,2,,,0,1,2,,],
        14: [,,,,4,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,4,,,,,4,,,,,,,,,,,,,,,4,0,,2,3,4,,,2,3,4,,,2,3,4,,,2,3,4],
        13: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,],
        11: [,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,3,4,0,1,2,3,4,,,2,,,,,,,,,,2,,,,,2,,4,,,2,,],
        10: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,,0,,2,3,,,,,,,,,,,,0,,,3,4,0,1,,3,,0,,,3,4,,,,3,4,0,,,3,4],
        7: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,,1,2,3,4,,1,2,3,4,0,,,,,,,,,,0,,,,,,,,,,0,,,,4],
        6: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,4,0,,2,3,4,0,,,,4,0,,,,4,0,,,,4],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,4,,,,,,,,,,,,,,,],
        3: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,4,,,,,,0,,,,4,0,,,,,,,,,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,0,1,2,,,0,1,2,,,,1,2,,4,,,,,,,1,2,,4,,1,2,,,,1,2,,],
        1: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,,,,,,,,,,,,,,,,],
    },
    reg: {
        21: [,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,0,1,2,,,,1,,,,0,1,2,,,0,1,2,,],
        18: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,,,,,,,0,,,,,,,,,,,,,,],
        16: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,1,,,4,0,1,,,,0,1,,,,0,1,,,,0,1,,,],
        15: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,,0,1,2,3,,,1,2,,4,,1,2,,,,1,2,,,,1,2,,,,1,2,,],
        14: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,2,3,4,,,2,3,4,,,2,3,4,,,2,3,4],
        13: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,2,,,,,2,,,,,2,,,,,2,3,4,,,2,,],
        10: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,,,,,,,,,,,0,1,,3,,0,1,,3,,0,1,,3,,,,,3,,0,1,,3,],
        7: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,1,,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,1,,,,,1,,,,,,,,,,,,,,0,,2,3,,0,,2,3,4,0,,2,3,,0,,2,3,,0,,2,3,4],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,4,,,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,4,0,1,,,4,0,1,2,,,0,1,2,,,0,1,2,3,4,,1,2,3,,0,1,2,3,4,0,1,2,3,,,1,2,3,],
        1: [,1,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    }
};

const RIGHT_REEL_SLIP_MASTER = {
    hazure: {
        21: [0,,2,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,,2,,4,0,,2,,4,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,1,,,4,,1,,,4,,,2,3,4,,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,,3,4,0,,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [0,1,,3,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,0,,,,4,0,,,,4,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,1,,3,,0,1,2,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,0,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,2,,,0,,2,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,2,,,,,2,,,,,2,3,,,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,,3,,,1,,3,,,,2,3,,,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [0,,2,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,,,3,,0,,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    Vsus: {
        21: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,2,,4,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,2,,4,,,2,,4,0,1,2,3,,0,1,2,3,,,,2,,,,,2,,,,,2,,,,,,,,,,2,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,,,,,],
        18: [,1,,3,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,1,,3,,,1,,3,,,,2,3,4,,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,3,,0,1,,3,,0,1,,3,,,,,,,0,1,,3,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,1,,3,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,,3,,,1,,3,,,,,,,,,,,,0,,2,3,4,0,,2,3,,0,,2,3,,,,,,,0,,2,3,4],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,],
        13: [0,,,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,0,1,,,,,,,,],
        12: [,,,,,0,1,2,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,4,,,2,,4,,,,,,,,2,,],
        11: [0,,2,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,2,,,0,,2,,4,0,,2,,4,0,1,2,3,4,,,2,,],
        10: [0,,2,,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,0,,2,,,0,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,,,,2,,,,,2,,,,,,,,0,,2,,],
        7: [0,1,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,,,,0,1,,,,0,1,2,3,,0,1,2,3,,0,,,,,,,,,,,,,,,,,,,,0,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,],
        5: [0,1,,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,1,,3,,0,1,,3,,,,2,3,,,,2,3,,0,1,2,,,0,1,2,,,0,1,2,,,0,1,2,,,0,1,2,,],
        4: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [0,,2,3,4,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,2,3,4,0,,2,3,4,,,2,3,,,,2,3,,,1,2,3,4,,1,2,3,4,,1,2,3,4,,1,2,3,4,,1,2,3,4],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,,,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,3,,,,,3,,,,,,,,,,,,,,,3,,,,,3,,,,,3,,,,,,,,,,3,],
    },
    seven: {
        21: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,,2,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,,2,,4,0,,2,,4,0,1,2,3,,0,1,2,3,,0,,2,,,,,,,,0,,2,,,0,,2,,,0,,2,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,,,,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,1,,,,,1,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,],
        17: [0,,,3,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,1,,,,,1,,,,0,1,,3,,0,1,,,,0,1,,,,0,1,,3,,0,1,,3,],
        16: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [0,,2,3,4,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,,2,3,4,0,1,2,3,4,0,1,2,3,4,0,,2,,,,,2,3,4],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,,,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,4,,,,,4,,,,3,,,,,3,,,,,,,,,,3,,,,,,,,1,,,,,,,,],
        12: [,,,,,0,1,2,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,,,,,,2,,4,,,2,,4,,,2,,],
        11: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,3,4,,,2,,4,0,,2,,4,,,2,,],
        10: [0,1,,3,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,0,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,3,,,,,,,,,,,,,,,,],
        8: [0,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,,,,,,,,,,,0,,2,3,,,,,,,,,2,3,,,,,3,,0,,2,3,],
        7: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,2,,,0,,2,,,0,1,2,3,,0,1,2,3,,0,,,,,,,,,,,,,,,,1,,3,,0,,,3,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,1,,3,,,,2,,,,,,,,,,,,],
        5: [,,2,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,2,,,,,2,,,,,2,3,,,,2,3,,,,,,,,1,,,,,,2,,,,,2,,,,,2,,],
        4: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,1,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,,3,,,1,,3,,,,2,3,,,,2,3,,0,1,2,3,,,,,,,,1,2,3,,,1,2,3,,,1,2,3,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,],
        1: [0,1,,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,,,3,,0,,,3,,,,,,,,,,,,,,,3,,,,2,3,,,,,3,,,,,3,,,,,3,],
    },
    reg: {
        21: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,,,,0,1,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,2,3,4,,,2,3,4,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,],
        17: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [0,1,2,3,4,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,,,,0,1,2,3,4],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,3,,,,,3,,0,1,2,3,,,,,,],
        12: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,4,,,,3,4,,,,3,4,,,,,],
        11: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,4,,,,,4,,,,,],
        10: [0,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,3,,0,1,,3,,,,,,,,,,,,0,1,,,,,,,,,,,,,,,,,,,0,1,,,],
        9: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,4,0,,2,3,4,,,,,,,,,,,0,1,2,3,4,,,2,3,4,,,2,3,4,,,2,3,4,0,1,2,3,4],
        7: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,3,,,,2,3,,,,2,,,,,2,,,,,2,,,,,2,,,,,2,,],
        4: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [0,1,2,3,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,2,3,,,,2,3,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,0,1,2,3,,0,1,2,3,],
    }
};

class ReverseAuditor {
    audit(reel, state, currentStopNum) {
        if (typeof LEFT_REEL_SLIP_MASTER === 'undefined') return [];
        let master = (reel==='left') ? LEFT_REEL_SLIP_MASTER : (reel==='middle' ? MIDDLE_REEL_SLIP_MASTER : RIGHT_REEL_SLIP_MASTER);
        const stateMap = { 'bonus_unestablished':'hazure', 'x_big_established':'Vsus', 'seven_big_established':'seven', 'reg_bonus_established':'reg' };
        const modeTable = master[stateMap[state]];
        if (!modeTable || !modeTable[currentStopNum]) return [];
        const row = modeTable[currentStopNum];
        const results = [];
        Object.keys(FLAG_INFO).forEach((flagKey, fIdx) => {
            const start = fIdx * 5; 
            const found = [];
            for (let i = 0; i < 5; i++) {
                const s = row[start + i];
                if (s !== "" && s !== null && s !== undefined) found.push(s);
            }
            if (found.length > 0) {
                // スベリコマ数を集約して降順に並べる
                found.sort((a, b) => b - a);
                results.push({ key: flagKey, info: FLAG_INFO[flagKey], slips: found.join('') });
            }
        });
        return results;
    }
}
const Engine = new ReverseAuditor();

const app = {
    state: { reel: 'left', flagMode: 'bonus_unestablished', stopNum: 21 },
    init() { this.renderReelStrip(); this.attachEvents(); this.updateView(); },
    setStop(side) { this.state.reel = side; this.renderReelStrip(); this.updateView(); },
    setState(mode) { this.state.flagMode = mode; this.updateView(); },
    updateView() {
        document.querySelectorAll('.stop-tab').forEach(el => el.classList.toggle('active', el.id === `t-${this.state.reel}`));
        document.querySelectorAll('.state-tab').forEach(el => el.classList.toggle('active', el.id === `s-${this.state.flagMode}`));
        const list = document.getElementById('result-list'); list.innerHTML = '';
        const results = Engine.audit(this.state.reel, this.state.flagMode, this.state.stopNum);
        if(results.length === 0) {
            list.innerHTML = '<div style="padding:20px;text-align:center;color:#555;">データ未装填</div>';
        } else {
            results.forEach(res => {
                const row = document.createElement('div');
                row.className = `res-row f-${res.info.c}`;
                // スベリコマ数を [43210] のような形式に集約
                row.innerHTML = `<div class="res-name">${res.info.n}</div><div class="res-data">[${res.slips}]</div>`;
                list.appendChild(row);
            });
        }
        const baseH = 21 * 60;
        const targetIdx = 21 - this.state.stopNum;
        document.getElementById('reel-strip').style.transform = `translate3d(0, ${-baseH - (targetIdx * 60) + 120}px, 0)`;
    },
    renderReelStrip() {
        const container = document.getElementById('reel-strip'); container.innerHTML = '';
        const syms = REEL_SYMBOLS[this.state.reel];
        const assets = { left: "reel1.png", middle: "reel2.png", right: "reel3.png" };
        for(let loop=0; loop<3; loop++) {
            syms.forEach((sym, idx) => {
                const el = document.createElement('div');
                el.className = 'symbol';
                el.innerHTML = `<div class="sym-idx">${21-idx}</div><div class="sym-bg" style="background-image:url('${assets[this.state.reel]}');background-size:100% 1260px;background-position:center -${idx*60}px"></div>`;
                container.appendChild(el);
            });
        }
    },
    attachEvents() {
        const touchArea = document.getElementById('touch-area');
        let startY = 0; let startNum = 0; let isDragging = false;
        const onMove = (y) => {
            if(!isDragging) return;
            const diff = startY - y;
            const moveFrame = Math.round(diff / 60);
            let nextNum = startNum - moveFrame;
            while(nextNum > 21) nextNum -= 21;
            while(nextNum < 1) nextNum += 21;
            if(this.state.stopNum !== nextNum) {
                this.state.stopNum = nextNum;
                this.updateView();
            }
        };
        touchArea.addEventListener('mousedown', e => { isDragging=true; startY=e.pageY; startNum=this.state.stopNum; });
        window.addEventListener('mousemove', e => onMove(e.pageY));
        window.addEventListener('mouseup', () => isDragging=false);
        touchArea.addEventListener('touchstart', e => { isDragging=true; startY=e.touches[0].pageY; startNum=this.state.stopNum; }, {passive:false});
        window.addEventListener('touchmove', e => { e.preventDefault(); onMove(e.touches[0].pageY); }, {passive:false});
        window.addEventListener('touchend', () => isDragging=false);
    }
};
app.init();
</script>
</body>
</html>